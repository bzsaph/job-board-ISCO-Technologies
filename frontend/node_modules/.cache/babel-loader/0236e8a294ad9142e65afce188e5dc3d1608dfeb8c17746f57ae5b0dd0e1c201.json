{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api, { setAuthToken } from '../../services/api';\nexport const login = createAsyncThunk('auth/login', async payload => {\n  const res = await api.post('/auth/login', payload);\n  return res.data;\n});\nexport const register = createAsyncThunk('auth/register', async payload => {\n  const res = await api.post('/auth/register', payload);\n  return res.data;\n});\nconst initialToken = localStorage.getItem('token');\nif (initialToken) setAuthToken(initialToken);\nconst slice = createSlice({\n  name: 'auth',\n  initialState: {\n    token: initialToken,\n    user: JSON.parse(localStorage.getItem('user') || 'null'),\n    status: 'idle'\n  },\n  reducers: {\n    logout(state) {\n      state.token = null;\n      state.user = null;\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      setAuthToken(null);\n    }\n  },\n  extraReducers: b => {\n    b.addCase(login.fulfilled, (state, action) => {\n      state.token = action.payload.token;\n      state.user = action.payload.user;\n      localStorage.setItem('token', action.payload.token);\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n      setAuthToken(action.payload.token);\n    });\n    b.addCase(register.fulfilled, (state, action) => {\n      state.token = action.payload.token;\n      state.user = action.payload.user;\n      localStorage.setItem('token', action.payload.token);\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n      setAuthToken(action.payload.token);\n    });\n  }\n});\nexport const updateUserProfile = createAsyncThunk('auth/updateProfile', async (payload, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  const res = await api.put('/auth/profile', payload, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return res.data;\n});\nexport const {\n  logout\n} = slice.actions;\nexport default slice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","setAuthToken","login","payload","res","post","data","register","initialToken","localStorage","getItem","slice","name","initialState","token","user","JSON","parse","status","reducers","logout","state","removeItem","extraReducers","b","addCase","fulfilled","action","setItem","stringify","updateUserProfile","getState","auth","put","headers","Authorization","actions","reducer"],"sources":["D:/fullstacker/job-board/frontend/src/store/slices/authSlice.js"],"sourcesContent":["\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api, { setAuthToken } from '../../services/api';\n\nexport const login = createAsyncThunk('auth/login', async (payload) => {\n  const res = await api.post('/auth/login', payload);\n  return res.data;\n});\nexport const register = createAsyncThunk('auth/register', async (payload) => {\n  const res = await api.post('/auth/register', payload);\n  return res.data;\n});\n\nconst initialToken = localStorage.getItem('token');\nif (initialToken) setAuthToken(initialToken);\n\nconst slice = createSlice({\n  name: 'auth',\n  initialState: { token: initialToken, user: JSON.parse(localStorage.getItem('user')||'null'), status: 'idle' },\n  reducers: {\n    logout(state) {\n      state.token = null; state.user = null;\n      localStorage.removeItem('token'); localStorage.removeItem('user');\n      setAuthToken(null);\n    }\n  },\n  extraReducers: (b) => {\n    b.addCase(login.fulfilled, (state, action) => {\n      state.token = action.payload.token; state.user = action.payload.user;\n      localStorage.setItem('token', action.payload.token);\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n      setAuthToken(action.payload.token);\n    });\n    b.addCase(register.fulfilled, (state, action) => {\n      state.token = action.payload.token; state.user = action.payload.user;\n      localStorage.setItem('token', action.payload.token);\n      localStorage.setItem('user', JSON.stringify(action.payload.user));\n      setAuthToken(action.payload.token);\n    });\n  }\n});\n\n\nexport const updateUserProfile = createAsyncThunk(\n  'auth/updateProfile',\n  async (payload, { getState }) => {\n    const token = getState().auth.token;\n    const res = await api.put('/auth/profile', payload, {\n      headers: { Authorization: `Bearer ${token}` },\n    });\n    return res.data;\n  }\n);\n\nexport const { logout } = slice.actions;\nexport default slice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}