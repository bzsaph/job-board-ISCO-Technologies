{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import api from'../../services/api';// Utility to set the auth token for axios globally\nexport function setAuthToken(token){if(token){api.defaults.headers.common['Authorization']=\"Bearer \".concat(token);}else{delete api.defaults.headers.common['Authorization'];}}// Fetch applications of logged-in user\nexport const fetchMyApplications=createAsyncThunk('myApplications/fetch',async(_,_ref)=>{let{getState}=_ref;const token=getState().auth.token;if(!token)throw new Error('Not logged in');setAuthToken(token);const res=await api.get('/applications/mine');return res.data;});// (Optional) Create new application\nexport const createApplication=createAsyncThunk('myApplications/create',async(payload,_ref2)=>{let{getState}=_ref2;const token=getState().auth.token;if(!token)throw new Error('Not logged in');setAuthToken(token);const res=await api.post('/applications',payload);return res.data;});// (Optional) Delete an application\nexport const deleteApplication=createAsyncThunk('myApplications/delete',async(id,_ref3)=>{let{getState}=_ref3;const token=getState().auth.token;if(!token)throw new Error('Not logged in');setAuthToken(token);await api.delete(\"/applications/\".concat(id));return id;});const slice=createSlice({name:'myApplications',initialState:{list:[],status:'idle',error:null},reducers:{},extraReducers:builder=>{builder// Fetch\n.addCase(fetchMyApplications.pending,state=>{state.status='loading';}).addCase(fetchMyApplications.fulfilled,(state,action)=>{state.list=action.payload;state.status='succeeded';state.error=null;}).addCase(fetchMyApplications.rejected,(state,action)=>{state.status='failed';state.error=action.error.message;})// Create\n.addCase(createApplication.fulfilled,(state,action)=>{state.list.unshift(action.payload);state.error=null;}).addCase(createApplication.rejected,(state,action)=>{state.error=action.error.message;})// Delete\n.addCase(deleteApplication.fulfilled,(state,action)=>{state.list=state.list.filter(a=>a.id!==action.payload);state.error=null;}).addCase(deleteApplication.rejected,(state,action)=>{state.error=action.error.message;});}});export default slice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","setAuthToken","token","defaults","headers","common","concat","fetchMyApplications","_","_ref","getState","auth","Error","res","get","data","createApplication","payload","_ref2","post","deleteApplication","id","_ref3","delete","slice","name","initialState","list","status","error","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","rejected","message","unshift","filter","a","reducer"],"sources":["D:/fullstacker/job-board/frontend/src/store/slices/myapplicationslices.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from '../../services/api';\r\n\r\n// Utility to set the auth token for axios globally\r\nexport function setAuthToken(token) {\r\n  if (token) {\r\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n  } else {\r\n    delete api.defaults.headers.common['Authorization'];\r\n  }\r\n}\r\n\r\n// Fetch applications of logged-in user\r\nexport const fetchMyApplications = createAsyncThunk(\r\n  'myApplications/fetch',\r\n  async (_, { getState }) => {\r\n    const token = getState().auth.token;\r\n    if (!token) throw new Error('Not logged in');\r\n\r\n    setAuthToken(token);\r\n    const res = await api.get('/applications/mine');\r\n    return res.data;\r\n  }\r\n);\r\n\r\n// (Optional) Create new application\r\nexport const createApplication = createAsyncThunk(\r\n  'myApplications/create',\r\n  async (payload, { getState }) => {\r\n    const token = getState().auth.token;\r\n    if (!token) throw new Error('Not logged in');\r\n\r\n    setAuthToken(token);\r\n    const res = await api.post('/applications', payload);\r\n    return res.data;\r\n  }\r\n);\r\n\r\n// (Optional) Delete an application\r\nexport const deleteApplication = createAsyncThunk(\r\n  'myApplications/delete',\r\n  async (id, { getState }) => {\r\n    const token = getState().auth.token;\r\n    if (!token) throw new Error('Not logged in');\r\n\r\n    setAuthToken(token);\r\n    await api.delete(`/applications/${id}`);\r\n    return id;\r\n  }\r\n);\r\n\r\nconst slice = createSlice({\r\n  name: 'myApplications',\r\n  initialState: {\r\n    list: [],\r\n    status: 'idle',\r\n    error: null,\r\n  },\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Fetch\r\n      .addCase(fetchMyApplications.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(fetchMyApplications.fulfilled, (state, action) => {\r\n        state.list = action.payload;\r\n        state.status = 'succeeded';\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchMyApplications.rejected, (state, action) => {\r\n        state.status = 'failed';\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      // Create\r\n      .addCase(createApplication.fulfilled, (state, action) => {\r\n        state.list.unshift(action.payload);\r\n        state.error = null;\r\n      })\r\n      .addCase(createApplication.rejected, (state, action) => {\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      // Delete\r\n      .addCase(deleteApplication.fulfilled, (state, action) => {\r\n        state.list = state.list.filter((a) => a.id !== action.payload);\r\n        state.error = null;\r\n      })\r\n      .addCase(deleteApplication.rejected, (state, action) => {\r\n        state.error = action.error.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport default slice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}