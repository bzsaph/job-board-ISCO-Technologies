{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../services/api';\n\n// Utility to set the auth token for axios globally\nexport function setAuthToken(token) {\n  if (token) {\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  } else {\n    delete api.defaults.headers.common['Authorization'];\n  }\n}\n\n// Fetch applications of logged-in user\nexport const fetchMyApplications = createAsyncThunk('myApplications/fetch', async (_, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  if (!token) throw new Error('Not logged in');\n  setAuthToken(token);\n  const res = await api.get('/applications/mine');\n  return res.data;\n});\n\n// (Optional) Create new application\nexport const createApplication = createAsyncThunk('myApplications/create', async (payload, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  if (!token) throw new Error('Not logged in');\n  setAuthToken(token);\n  const res = await api.post('/applications', payload);\n  return res.data;\n});\n\n// (Optional) Delete an application\nexport const deleteApplication = createAsyncThunk('myApplications/delete', async (id, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  if (!token) throw new Error('Not logged in');\n  setAuthToken(token);\n  await api.delete(`/applications/${id}`);\n  return id;\n});\nconst slice = createSlice({\n  name: 'myApplications',\n  initialState: {\n    list: [],\n    status: 'idle',\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // Fetch\n    .addCase(fetchMyApplications.pending, state => {\n      state.status = 'loading';\n    }).addCase(fetchMyApplications.fulfilled, (state, action) => {\n      state.list = action.payload;\n      state.status = 'succeeded';\n      state.error = null;\n    }).addCase(fetchMyApplications.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    })\n\n    // Create\n    .addCase(createApplication.fulfilled, (state, action) => {\n      state.list.unshift(action.payload);\n      state.error = null;\n    }).addCase(createApplication.rejected, (state, action) => {\n      state.error = action.error.message;\n    })\n\n    // Delete\n    .addCase(deleteApplication.fulfilled, (state, action) => {\n      state.list = state.list.filter(a => a.id !== action.payload);\n      state.error = null;\n    }).addCase(deleteApplication.rejected, (state, action) => {\n      state.error = action.error.message;\n    });\n  }\n});\nexport default slice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","setAuthToken","token","defaults","headers","common","fetchMyApplications","_","getState","auth","Error","res","get","data","createApplication","payload","post","deleteApplication","id","delete","slice","name","initialState","list","status","error","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","rejected","message","unshift","filter","a","reducer"],"sources":["D:/fullstacker/job-board/frontend/src/store/slices/myapplicationslices.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport api from '../../services/api';\r\n\r\n// Utility to set the auth token for axios globally\r\nexport function setAuthToken(token) {\r\n  if (token) {\r\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n  } else {\r\n    delete api.defaults.headers.common['Authorization'];\r\n  }\r\n}\r\n\r\n// Fetch applications of logged-in user\r\nexport const fetchMyApplications = createAsyncThunk(\r\n  'myApplications/fetch',\r\n  async (_, { getState }) => {\r\n    const token = getState().auth.token;\r\n    if (!token) throw new Error('Not logged in');\r\n\r\n    setAuthToken(token);\r\n    const res = await api.get('/applications/mine');\r\n    return res.data;\r\n  }\r\n);\r\n\r\n// (Optional) Create new application\r\nexport const createApplication = createAsyncThunk(\r\n  'myApplications/create',\r\n  async (payload, { getState }) => {\r\n    const token = getState().auth.token;\r\n    if (!token) throw new Error('Not logged in');\r\n\r\n    setAuthToken(token);\r\n    const res = await api.post('/applications', payload);\r\n    return res.data;\r\n  }\r\n);\r\n\r\n// (Optional) Delete an application\r\nexport const deleteApplication = createAsyncThunk(\r\n  'myApplications/delete',\r\n  async (id, { getState }) => {\r\n    const token = getState().auth.token;\r\n    if (!token) throw new Error('Not logged in');\r\n\r\n    setAuthToken(token);\r\n    await api.delete(`/applications/${id}`);\r\n    return id;\r\n  }\r\n);\r\n\r\nconst slice = createSlice({\r\n  name: 'myApplications',\r\n  initialState: {\r\n    list: [],\r\n    status: 'idle',\r\n    error: null,\r\n  },\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Fetch\r\n      .addCase(fetchMyApplications.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(fetchMyApplications.fulfilled, (state, action) => {\r\n        state.list = action.payload;\r\n        state.status = 'succeeded';\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchMyApplications.rejected, (state, action) => {\r\n        state.status = 'failed';\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      // Create\r\n      .addCase(createApplication.fulfilled, (state, action) => {\r\n        state.list.unshift(action.payload);\r\n        state.error = null;\r\n      })\r\n      .addCase(createApplication.rejected, (state, action) => {\r\n        state.error = action.error.message;\r\n      })\r\n\r\n      // Delete\r\n      .addCase(deleteApplication.fulfilled, (state, action) => {\r\n        state.list = state.list.filter((a) => a.id !== action.payload);\r\n        state.error = null;\r\n      })\r\n      .addCase(deleteApplication.rejected, (state, action) => {\r\n        state.error = action.error.message;\r\n      });\r\n  },\r\n});\r\n\r\nexport default slice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}