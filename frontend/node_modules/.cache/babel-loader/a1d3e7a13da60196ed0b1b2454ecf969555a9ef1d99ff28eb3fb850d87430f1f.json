{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../services/api';\nexport function setAuthToken(token) {\n  if (token) api.defaults.headers.common['Authorization'] = `Bearer ${token}`;else delete api.defaults.headers.common['Authorization'];\n}\n\n// Fetch all jobs (public)\nexport const fetchJobs = createAsyncThunk('jobs/fetch', async (params = '') => {\n  const res = await api.get(`/jobs${params}`);\n  return res.data;\n});\n\n// Fetch single job (public)\nexport const fetchJob = createAsyncThunk('jobs/fetchOne', async id => {\n  const res = await api.get(`/jobs/${id}`);\n  return res.data;\n});\n\n// Create job (requires auth)\nexport const createJob = createAsyncThunk('jobs/create', async (payload, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  console.log(getState().auth.token);\n  if (!token) throw new Error('Not logged in');\n  setAuthToken(token); // ensure axios has it globally\n  const res = await api.post('/jobs', payload); // no need to pass headers here\n  // ...............................\n  console.log(res.data);\n  return res.data;\n});\n\n// Update job (requires auth)\nexport const updateJob = createAsyncThunk('jobs/update', async ({\n  id,\n  data\n}, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  if (!token) throw new Error('Not logged in');\n  const res = await api.put(`/jobs/${id}`, data, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    }\n  });\n  return res.data;\n});\n\n// Delete job (requires auth)\nexport const deleteJob = createAsyncThunk('jobs/delete', async (id, {\n  getState\n}) => {\n  const token = getState().auth.token;\n  if (!token) throw new Error('Not logged in');\n  await api.delete(`/jobs/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return id;\n});\nconst slice = createSlice({\n  name: 'jobs',\n  initialState: {\n    list: [],\n    current: null,\n    status: 'idle',\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchJobs.fulfilled, (state, action) => {\n      state.list = action.payload;\n      state.error = null;\n    }).addCase(fetchJobs.rejected, (state, action) => {\n      state.error = action.error.message;\n    }).addCase(fetchJob.fulfilled, (state, action) => {\n      state.current = action.payload;\n      state.error = null;\n    }).addCase(fetchJob.rejected, (state, action) => {\n      state.error = action.error.message;\n    }).addCase(createJob.fulfilled, (state, action) => {\n      state.list.unshift(action.payload);\n      state.error = null;\n    }).addCase(createJob.rejected, (state, action) => {\n      state.error = action.error.message;\n    }).addCase(updateJob.fulfilled, (state, action) => {\n      state.list = state.list.map(j => j.id === action.payload.id ? action.payload : j);\n      state.current = action.payload;\n      state.error = null;\n    }).addCase(updateJob.rejected, (state, action) => {\n      state.error = action.error.message;\n    }).addCase(deleteJob.fulfilled, (state, action) => {\n      state.list = state.list.filter(j => j.id !== action.payload);\n      state.error = null;\n    }).addCase(deleteJob.rejected, (state, action) => {\n      state.error = action.error.message;\n    });\n  }\n});\nexport default slice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","api","setAuthToken","token","defaults","headers","common","fetchJobs","params","res","get","data","fetchJob","id","createJob","payload","getState","auth","console","log","Error","post","updateJob","put","Authorization","deleteJob","delete","slice","name","initialState","list","current","status","error","reducers","extraReducers","builder","addCase","fulfilled","state","action","rejected","message","unshift","map","j","filter","reducer"],"sources":["D:/fullstacker/job-board/frontend/src/store/slices/jobsSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport api from '../../services/api';\nexport function setAuthToken(token) {\n  if (token) api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  else delete api.defaults.headers.common['Authorization'];\n}\n\n// Fetch all jobs (public)\nexport const fetchJobs = createAsyncThunk('jobs/fetch', async (params = '') => {\n  const res = await api.get(`/jobs${params}`);\n  return res.data;\n});\n\n// Fetch single job (public)\nexport const fetchJob = createAsyncThunk('jobs/fetchOne', async (id) => {\n  const res = await api.get(`/jobs/${id}`);\n  return res.data;\n});\n\n// Create job (requires auth)\nexport const createJob = createAsyncThunk(\n  'jobs/create',\n  async (payload, { getState }) => {\n    const token = getState().auth.token;\n    console.log(getState().auth.token);\n    if (!token) throw new Error('Not logged in');\n\n    setAuthToken(token); // ensure axios has it globally\n    const res = await api.post('/jobs', payload); // no need to pass headers here\n    // ...............................\n    console.log(res.data);\n    return res.data;\n  }\n);\n\n\n// Update job (requires auth)\nexport const updateJob = createAsyncThunk(\n  'jobs/update',\n  async ({ id, data }, { getState }) => {\n    const token = getState().auth.token;\n    if (!token) throw new Error('Not logged in');\n\n    const res = await api.put(`/jobs/${id}`, data, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    });\n    return res.data;\n  }\n);\n\n// Delete job (requires auth)\nexport const deleteJob = createAsyncThunk(\n  'jobs/delete',\n  async (id, { getState }) => {\n    const token = getState().auth.token;\n    if (!token) throw new Error('Not logged in');\n\n    await api.delete(`/jobs/${id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n    return id;\n  }\n);\n\nconst slice = createSlice({\n  name: 'jobs',\n  initialState: { list: [], current: null, status: 'idle', error: null },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchJobs.fulfilled, (state, action) => {\n        state.list = action.payload;\n        state.error = null;\n      })\n      .addCase(fetchJobs.rejected, (state, action) => {\n        state.error = action.error.message;\n      })\n      .addCase(fetchJob.fulfilled, (state, action) => {\n        state.current = action.payload;\n        state.error = null;\n      })\n      .addCase(fetchJob.rejected, (state, action) => {\n        state.error = action.error.message;\n      })\n      .addCase(createJob.fulfilled, (state, action) => {\n        state.list.unshift(action.payload);\n        state.error = null;\n      })\n      .addCase(createJob.rejected, (state, action) => {\n        state.error = action.error.message;\n      })\n      .addCase(updateJob.fulfilled, (state, action) => {\n        state.list = state.list.map(j => j.id === action.payload.id ? action.payload : j);\n        state.current = action.payload;\n        state.error = null;\n      })\n      .addCase(updateJob.rejected, (state, action) => {\n        state.error = action.error.message;\n      })\n      .addCase(deleteJob.fulfilled, (state, action) => {\n        state.list = state.list.filter(j => j.id !== action.payload);\n        state.error = null;\n      })\n      .addCase(deleteJob.rejected, (state, action) => {\n        state.error = action.error.message;\n      });\n  },\n});\n\n\nexport default slice.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}